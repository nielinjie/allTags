// Generated by CoffeeScript 1.3.3
var ResourcesView, appView, clickNode, getResources, resourceTemplateString, tags;

tags = {};

$(function() {
  return $(document).ready(function() {
    var resources, size;
    size = [$('#canvas-container').width(), $('#canvas-container').height()];
    $('#viewport').attr({
      width: size[0],
      height: size[1]
    });
    resources = getResources();
    return tags = new AllTags('#viewport', clickNode, size, new Resources(resources));
  });
});

getResources = function() {
  return syncGet("./resources");
};

appView = Backbone.View.extend({
  el: $('#all-tags-app')
});

resourceTemplateString = templateString('resource');

ResourcesView = Backbone.View.extend({
  el: $('#resources'),
  render: function() {
    var that;
    this.$el.empty();
    that = this;
    return _.each(this.model, function(resource) {
      return that.$el.append($(_.template(resourceTemplateString, resource)));
    });
  }
});

clickNode = function(node) {
  return (new ResourcesView({
    model: tags.resources.byTagName(node.name)
  })).render();
};
